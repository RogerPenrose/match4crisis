{% extends 'base.html' %}
{% load static %}
{% load i18n %}

{% block title %}
{% if requestForHelp %}
{% if edit %}
{% blocktrans %}Hilfsgesuch bearbeiten:{% endblocktrans %}
{% else %}
{% blocktrans %}Hilfsgesuch erstellen:{% endblocktrans %}
{% endif %}
{% else %}
{% if edit %}
{% blocktrans %}Hilfsangebot bearbeiten:{% endblocktrans %}
{% else %}
{% blocktrans %}Hilfsangebot erstellen:{% endblocktrans %}
{% endif %}
{% endif %}{% endblock %}

{% block header %}
<link rel="stylesheet" href="{% static 'css/form.css' %}">
<style>
.subtitle{
    font-size : 1em;
    font-weight: 400;
    margin-bottom : 25px;
}

input[type=checkbox]~label { position: relative;
  display: inline-block;
 margin-right: .5rem;
  border-radius: 23px;
  vertical-align: text-bottom;
  transition: all 0.3s linear;
margin-bottom: 0px;
border-radius: 1rem;
    box-shadow: 0px 0px 5px rgb(0 0 0 / 8%);
    width: 100%;
    padding: 10px 10px 10px 70px;
    font-weight: 600;
    margin-bottom: 15px;
}
.form-control { border-radius: 1rem; }

input[type=checkbox]~label::before {
content: "";
  position: absolute;
  left: 10px;
  top: 10px;
  width: 42px;
  height: 22px;
  background-color: #fff;
  border-radius: 11px;
  transform: translate3d(2px, 2px, 0) scale3d(1, 1, 1);
  transition: all 0.25s linear; 
  box-shadow: 0 0 0px 2px #e6e6e6;
}

input[type=checkbox]~label::after {
  content: "";
  position: absolute;
  left: 10px;
  top: 10px;
  width: 22px;
  height: 22px;
  background-color: #fff;
  border-radius: 11px;
  box-shadow: 0 2px 2px rgba(0, 0, 0, 0.24);
  transform: translate3d(2px, 2px, 0);
  transition: all 0.2s ease-in-out;
}


input[type=checkbox] { display: none; }

input[type=checkbox]:checked~label::before {  background-color: #4BD763;  box-shadow: 0 0 0px 2px #4BD763;}

input[type=checkbox]:checked~label::after  { transform: translate3d(22px, 2px, 0); }

.custom-control { padding-left: 0px; }
#isDigital label::before { border: 0px;}
table { width: 100%}

label { margin-bottom: 5px; font-weight: 600;}
.form-control { margin-bottom: 15px;}

input[type=checkbox] { box-shadow: none; width: auto; height: auto;}

.select2 {width: 100% !important}
.select2-dropdown { border: 0px !important;}
.select2-container .select2-search--inline .select2-search__field {  font-weight: 300 !important;}

#offerType, #lng, #lat, #bb, #latEnd, #lngEnd, #bbEnd, #helpType{
    display: none !important;
}

@media only screen and (max-width: 767px) {
    .btn{
        width: 100%;
    }
  }
</style>
<!--<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
-->
{{ detailForm.media.css }}
{% endblock %}
{% block content %}
<div style="height:40px"></div>
<div class="container">
    <div class="row" style=" margin-bottom:55px;">
               <div class="col-12 col-lg-6" style="margin: 0 auto">
                <h2 class="title" style="margin-bottom: 5px">
                    {% if requestForHelp %}
                    {% if edit %}
                    {% blocktrans %}Hilfsgesuch bearbeiten:{% endblocktrans %}
                    {% else %}
                    {% blocktrans %}Hilfsgesuch erstellen:{% endblocktrans %}
                    {% endif %}
                    {% else %}
                    {% if edit %}
                    {% blocktrans %}Hilfsangebot bearbeiten:{% endblocktrans %}
                    {% else %}
                    {% blocktrans %}Hilfsangebot erstellen:{% endblocktrans %}
                    {% endif %}
                    {% endif %}
                    {{genericForm.instance.get_offerType_display}} {% if request.GET.subtype %} | {{detailForm.instance.get_helpType_display}} {% endif %}
                </h2>
                <h4 class="subtitle">
                    {% if requestForHelp %}
                    {% blocktrans %}Beschreibe, wie und wo du Hilfe benötigst{% endblocktrans %}
                    {% else %}
                    {% blocktrans %}Beschreibe, wie und wo du helfen kannst{% endblocktrans %}
                    {% endif %}
                </h4>

<form id="thisForm" action="/offers/createOffer" method="POST" enctype="multipart/form-data">
    {% csrf_token %} 
    <table id="mainTable">
        <tbody>
            {% for field in genericForm.visible_fields %}
            <tr>
<td id="{{ field.name }}" style="    display: flex;
flex-direction: column-reverse;">{{field }} {{ field.label_tag }}</td>   
            </tr>
            {% endfor %}
             <tbody id="imageTable">   
            {% for field in imageForm.visible_fields %}
            <tr>
            <td>{{ field.label_tag }} {{ field }}</td> 
            </tr>
            {% endfor %}</tbody>
        </tbody>
        <tbody id="detailTable">
            {% for field in detailForm.visible_fields %}
            <tr>        
                <td id="{{ field.name }}" style="    display: flex;
                flex-direction: column-reverse;">{{ field }} {{ field.label_tag }} </td>   
            </tr>
            {% endfor %}
        </tbody>
        {%if requestForHelp %}
            <tbody style="display:none">
                <tr>
                    <td ><input type="checkbox" name="requestForHelp" checked> </input></td>
                </tr>
            </tbody>
        {%endif%}
       
    </table>
    <p><input type="submit" onclick="save_with_active()" value="{% blocktrans %}Erstellen und teilen {%endblocktrans%}" class="btn btn-green"></p>
    <p><input type="button" onclick="save_without_active()" value="{% blocktrans %}Speichern und später bearbeiten{%endblocktrans%}" class="btn btn-yellow"></p>
</form>

<p class="delete">
    <a href="#deleteOfferModal" class="btn btn-red" data-toggle="modal" data-target="#deleteOfferModal">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
        class="bi bi-delete bi-wastebin" viewBox="0 0 105.16 122.88">
        <path
          d="M11.17,37.16H94.65a8.4,8.4,0,0,1,2,.16,5.93,5.93,0,0,1,2.88,1.56,5.43,5.43,0,0,1,1.64,3.34,7.65,7.65,0,0,1-.06,1.44L94,117.31v0l0,.13,0,.28v0a7.06,7.06,0,0,1-.2.9v0l0,.06v0a5.89,5.89,0,0,1-5.47,4.07H17.32a6.17,6.17,0,0,1-1.25-.19,6.17,6.17,0,0,1-1.16-.48h0a6.18,6.18,0,0,1-3.08-4.88l-7-73.49a7.69,7.69,0,0,1-.06-1.66,5.37,5.37,0,0,1,1.63-3.29,6,6,0,0,1,3-1.58,8.94,8.94,0,0,1,1.79-.13ZM5.65,8.8H37.12V6h0a2.44,2.44,0,0,1,0-.27,6,6,0,0,1,1.76-4h0A6,6,0,0,1,43.09,0H62.46l.3,0a6,6,0,0,1,5.7,6V6h0V8.8h32l.39,0a4.7,4.7,0,0,1,4.31,4.43c0,.18,0,.32,0,.5v9.86a2.59,2.59,0,0,1-2.59,2.59H2.59A2.59,2.59,0,0,1,0,23.62V13.53H0a1.56,1.56,0,0,1,0-.31v0A4.72,4.72,0,0,1,3.88,8.88,10.4,10.4,0,0,1,5.65,8.8Zm42.1,52.7a4.77,4.77,0,0,1,9.49,0v37a4.77,4.77,0,0,1-9.49,0v-37Zm23.73-.2a4.58,4.58,0,0,1,5-4.06,4.47,4.47,0,0,1,4.51,4.46l-2,37a4.57,4.57,0,0,1-5,4.06,4.47,4.47,0,0,1-4.51-4.46l2-37ZM25,61.7a4.46,4.46,0,0,1,4.5-4.46,4.58,4.58,0,0,1,5,4.06l2,37a4.47,4.47,0,0,1-4.51,4.46,4.57,4.57,0,0,1-5-4.06l-2-37Z" />
      </svg>
      {% blocktrans %}Löschen{% endblocktrans %}
    </a>
  </p>


<div class="modal fade" id="deleteOfferModal" tabindex="-1" role="dialog"
          aria-labelledby="deleteOfferModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="deleteOfferModalLabel2">{% blocktrans %}Aktion bestätigen{% endblocktrans %}
                </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                {% if requestForHelp%}
                {% blocktrans %}
                Möchtest du dieses Gesuche wirklich löschen?<br />
                Diese Aktion kann nicht rückgängig gemacht werden!
                {% endblocktrans %}
                {% else %}
                {% blocktrans %}
                Möchtest du dieses Angebot wirklich löschen?<br />
                Diese Aktion kann nicht rückgängig gemacht werden!
                {% endblocktrans %}
                {% endif %}
              </div>
              <div class="modal-footer">
                <a class="btn btn-red" href="delete_offer" style="float:left;">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-delete bi-wastebin" viewBox="0 0 105.16 122.88">
                    <path
                      d="M11.17,37.16H94.65a8.4,8.4,0,0,1,2,.16,5.93,5.93,0,0,1,2.88,1.56,5.43,5.43,0,0,1,1.64,3.34,7.65,7.65,0,0,1-.06,1.44L94,117.31v0l0,.13,0,.28v0a7.06,7.06,0,0,1-.2.9v0l0,.06v0a5.89,5.89,0,0,1-5.47,4.07H17.32a6.17,6.17,0,0,1-1.25-.19,6.17,6.17,0,0,1-1.16-.48h0a6.18,6.18,0,0,1-3.08-4.88l-7-73.49a7.69,7.69,0,0,1-.06-1.66,5.37,5.37,0,0,1,1.63-3.29,6,6,0,0,1,3-1.58,8.94,8.94,0,0,1,1.79-.13ZM5.65,8.8H37.12V6h0a2.44,2.44,0,0,1,0-.27,6,6,0,0,1,1.76-4h0A6,6,0,0,1,43.09,0H62.46l.3,0a6,6,0,0,1,5.7,6V6h0V8.8h32l.39,0a4.7,4.7,0,0,1,4.31,4.43c0,.18,0,.32,0,.5v9.86a2.59,2.59,0,0,1-2.59,2.59H2.59A2.59,2.59,0,0,1,0,23.62V13.53H0a1.56,1.56,0,0,1,0-.31v0A4.72,4.72,0,0,1,3.88,8.88,10.4,10.4,0,0,1,5.65,8.8Zm42.1,52.7a4.77,4.77,0,0,1,9.49,0v37a4.77,4.77,0,0,1-9.49,0v-37Zm23.73-.2a4.58,4.58,0,0,1,5-4.06,4.47,4.47,0,0,1,4.51,4.46l-2,37a4.57,4.57,0,0,1-5,4.06,4.47,4.47,0,0,1-4.51-4.46l2-37ZM25,61.7a4.46,4.46,0,0,1,4.5-4.46,4.58,4.58,0,0,1,5,4.06l2,37a4.47,4.47,0,0,1-4.51,4.46,4.57,4.57,0,0,1-5-4.06l-2-37Z" />
                  </svg>
                  {% if requestForHelp%}{% trans "Gesuche Löschen" %}{% else %}{% trans "Angebot löschen" %}{% endif %}</a>
                <a class="btn btn-green" role="button" data-dismiss="modal" aria-label="close">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-x-circle" viewBox="0 0 16 16">
                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                    <path
                      d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z" />
                  </svg>
                  {% blocktrans %} Abbrechen {% endblocktrans %}
                </a>
              </div>
            </div>
          </div>
        </div>

</div></div></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
{{ detailForm.media.js }}
<script type="text/javascript" src="{% url 'create_js' %}"></script>
<script type="text/javascript">
document.addEventListener('readystatechange', function(event) {
    if (document.readyState === "complete") {
{% if  genericForm.offerType.value == "TR"%}
document.getElementById("id_helpType").addEventListener("change", toggleTransport);
toggleTransport()
{%elif genericForm.offerType.value == "CL"%}
    document.getElementById("id_timeOfDay").parentElement.parentElement.style.display = "none"
    document.getElementById("id_hasEducation").parentElement.parentElement.style.display = "none"
document.getElementById("id_helpType_childcare").addEventListener("change", toggleChildcareTimes);
document.getElementById("id_hasExperience").addEventListener("change", toggleChildcareCredentials);
document.getElementById("id_hasSpace").addEventListener("change", toggleHasSpace);
{%endif%}
{% if genericForm.offerType.value == "MP"%}
document.getElementById("id_hasMedicalExperience").addEventListener("change", toggleMedicalExperience);
document.getElementById("id_describeMedicalExperience").parentElement.parentElement.style.display = "none"
toggleMedicalExperience()
{%endif%}
    }
})
</script>
{% endblock %}