{% extends 'base.html' %}
{% load static %}
{% load i18n %}
{% load display_value %}
{% block title %}
{{helpRequest.title}}
{% endblock %}

{% block content %}
<div class="container">

  <div style="height:40px; "></div>

  <div class="row align-self-center align-items-center top-menu">
    <div class="col-4 left">
      <p class="font-weight-bold">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" style="margin-top: -2px;"
          class="bi bi-chevron-left" viewBox="0 0 16 16">
          <path fill-rule="evenodd"
            d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z" />
        </svg>
        <input type="button" class="back" value="{% blocktrans %}Zurück{% endblocktrans %}"
          onclick="window.history.back()" />
      </p>
    </div>
    <div class="col-8" style="text-align:right;">
      <p>
        <a href="#" onclick="share_this()" style="margin-left:5px;"><svg xmlns="http://www.w3.org/2000/svg" width="28"
            height="28" fill="currentColor" class="bi bi-share" viewBox="0 0 20 18">
            <path
              d="M13.5 1a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5zm-8.5 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm11 5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3z" />
          </svg>
        </a>
      </p>
    </div>
  </div>

  <div class="row align-self-center">

    <div class="col-sm-12 col-lg-4 title-image" style="text-decoration: underline; margin-top:15px;">

      {% if images %}
      <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">{% for entry in images %}
          <li data-target="#carouselExampleIndicators" data-slide-to="{{forloop.counter0}}"
            {% if forloop.counter0 == 0 %} class="active" {%endif%}></li>{% endfor %}
        </ol>
        <div class="carousel-inner">{% for entry in images %}
          <div class="carousel-item {% if forloop.counter0 == 0 %} active{%endif%}">
            <img class="d-block w-100" src="{{entry.image.url}}" alt="{{ forloop.counter }}">
          </div>{% endfor %}
        </div>
        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>

      {% elif organisation.logo.url|length > 0%}
      <img class="d-block w-100" src="{{organisation.logo.url}}">
      {% else %}
      <img class="d-block w-100" src="{% static 'img/icons/icon_DO.svg'%}">
      {%endif%}

    </div>

    <div class="col-sm-12 col-lg-8 description">
      <h1 class="title">{{ helpRequest.title }}</h1>
      <p>{% blocktrans %}Organisation{% endblocktrans%}: {{ helpRequest.organisation }}</p>
        <p>{% blocktrans %}Ort{% endblocktrans%}: {{ helpRequest.location }}</p>
        <br>
      <h5>{% blocktrans %}Beschreibung{% endblocktrans%}</h5>
      <p>{{ helpRequest.description|linebreaks }}</p>
      <iframe src="https://www.google.com/maps/embed/v1/place?key=AIzaSyCkskVPigLS7pO4Oc82hDRjBmDGNgKcEv8&q={{ helpRequest.location }}" width="100%" height="350" style="border:0; margin-top: 35px;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>


      {% if editAllowed %}
        <p style="margin-top: 25px;" class="edit">
          <a href="edit" class="btn btn-green" role="button" style="margin-bottom: 15px;">
            <svg xmlns="http://www.w3.org/2000/svg" id="editButton" width="16" height="16" fill="currentColor"
              class="bi bi-pencil-fill" viewBox="0 0 16 16">
              <path
                d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z" />
            </svg>
            {% blocktrans %}Bearbeiten{% endblocktrans %}
          </a>

        {% comment "Later maybe?" %}
          <a href="#toggleActiveModal" class="btn {% if generic.active.value %}btn-yellow{% else %}btn-green{% endif%}" data-toggle="modal" data-target="#toggleActiveModal">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle"
            viewBox="0 0 16 16">
            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
            <path
                d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z" />
        </svg>
        {% if helpRequest.active.value %}{% blocktrans %}Deaktivieren{% endblocktrans %}
        {% else %}{% blocktrans %}Aktivieren{% endblocktrans %}{% endif %}
          </a>
        {% endcomment %}

          <a href="#deleteHelpRequestModal" class="btn btn-red" data-toggle="modal" data-target="#deleteHelpRequestModal" style="margin-bottom: 15px;">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-delete bi-wastebin" viewBox="0 0 105.16 122.88">
              <path d="M11.17,37.16H94.65a8.4,8.4,0,0,1,2,.16,5.93,5.93,0,0,1,2.88,1.56,5.43,5.43,0,0,1,1.64,3.34,7.65,7.65,0,0,1-.06,1.44L94,117.31v0l0,.13,0,.28v0a7.06,7.06,0,0,1-.2.9v0l0,.06v0a5.89,5.89,0,0,1-5.47,4.07H17.32a6.17,6.17,0,0,1-1.25-.19,6.17,6.17,0,0,1-1.16-.48h0a6.18,6.18,0,0,1-3.08-4.88l-7-73.49a7.69,7.69,0,0,1-.06-1.66,5.37,5.37,0,0,1,1.63-3.29,6,6,0,0,1,3-1.58,8.94,8.94,0,0,1,1.79-.13ZM5.65,8.8H37.12V6h0a2.44,2.44,0,0,1,0-.27,6,6,0,0,1,1.76-4h0A6,6,0,0,1,43.09,0H62.46l.3,0a6,6,0,0,1,5.7,6V6h0V8.8h32l.39,0a4.7,4.7,0,0,1,4.31,4.43c0,.18,0,.32,0,.5v9.86a2.59,2.59,0,0,1-2.59,2.59H2.59A2.59,2.59,0,0,1,0,23.62V13.53H0a1.56,1.56,0,0,1,0-.31v0A4.72,4.72,0,0,1,3.88,8.88,10.4,10.4,0,0,1,5.65,8.8Zm42.1,52.7a4.77,4.77,0,0,1,9.49,0v37a4.77,4.77,0,0,1-9.49,0v-37Zm23.73-.2a4.58,4.58,0,0,1,5-4.06,4.47,4.47,0,0,1,4.51,4.46l-2,37a4.57,4.57,0,0,1-5,4.06,4.47,4.47,0,0,1-4.51-4.46l2-37ZM25,61.7a4.46,4.46,0,0,1,4.5-4.46,4.58,4.58,0,0,1,5,4.06l2,37a4.47,4.47,0,0,1-4.51,4.46,4.57,4.57,0,0,1-5-4.06l-2-37Z" />
            </svg>
            {% blocktrans %}Löschen{% endblocktrans %}
          </a>
        </p>


        <div class="modal fade" id="deleteHelpRequestModal" tabindex="-1" role="dialog" aria-labelledby="deleteHelpRequestModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="deleteHelpRequestModalLabel2">{% blocktrans %}Aktion bestätigen{% endblocktrans %}</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                {% blocktrans %}
                Möchtest du diesen Hilfsaufruf wirklich löschen?<br/>
                Diese Aktion kann nicht rückgängig gemacht werden!
                {% endblocktrans %}
              </div>
              <div class="modal-footer">
                <a class="btn btn-red" href="delete" style="float:left;">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-delete bi-wastebin" viewBox="0 0 105.16 122.88">
                    <path d="M11.17,37.16H94.65a8.4,8.4,0,0,1,2,.16,5.93,5.93,0,0,1,2.88,1.56,5.43,5.43,0,0,1,1.64,3.34,7.65,7.65,0,0,1-.06,1.44L94,117.31v0l0,.13,0,.28v0a7.06,7.06,0,0,1-.2.9v0l0,.06v0a5.89,5.89,0,0,1-5.47,4.07H17.32a6.17,6.17,0,0,1-1.25-.19,6.17,6.17,0,0,1-1.16-.48h0a6.18,6.18,0,0,1-3.08-4.88l-7-73.49a7.69,7.69,0,0,1-.06-1.66,5.37,5.37,0,0,1,1.63-3.29,6,6,0,0,1,3-1.58,8.94,8.94,0,0,1,1.79-.13ZM5.65,8.8H37.12V6h0a2.44,2.44,0,0,1,0-.27,6,6,0,0,1,1.76-4h0A6,6,0,0,1,43.09,0H62.46l.3,0a6,6,0,0,1,5.7,6V6h0V8.8h32l.39,0a4.7,4.7,0,0,1,4.31,4.43c0,.18,0,.32,0,.5v9.86a2.59,2.59,0,0,1-2.59,2.59H2.59A2.59,2.59,0,0,1,0,23.62V13.53H0a1.56,1.56,0,0,1,0-.31v0A4.72,4.72,0,0,1,3.88,8.88,10.4,10.4,0,0,1,5.65,8.8Zm42.1,52.7a4.77,4.77,0,0,1,9.49,0v37a4.77,4.77,0,0,1-9.49,0v-37Zm23.73-.2a4.58,4.58,0,0,1,5-4.06,4.47,4.47,0,0,1,4.51,4.46l-2,37a4.57,4.57,0,0,1-5,4.06,4.47,4.47,0,0,1-4.51-4.46l2-37ZM25,61.7a4.46,4.46,0,0,1,4.5-4.46,4.58,4.58,0,0,1,5,4.06l2,37a4.47,4.47,0,0,1-4.51,4.46,4.57,4.57,0,0,1-5-4.06l-2-37Z" />
                  </svg>
                  {% trans "Hilfsaufruf Löschen" %}
                </a>
                <a class="btn btn-green" role="button" data-dismiss="modal" aria-label="close">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle"
                      viewBox="0 0 16 16">
                      <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                      <path
                          d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z" />
                  </svg>
                  {% blocktrans %} Abbrechen {% endblocktrans %}
                </a> 
              </div>
            </div>
          </div>
        </div>
        {% else %}

      <p style="margin-top: 25px;" class="contact">
        <a href="contact" class="btn btn-green" role="button" aria-pressed="true">
          {% blocktrans %}Jetzt kontaktieren{% endblocktrans %}
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
            class="bi bi-arrow-right-circle" style="margin-top: -2px; margin-left: 10px" viewBox="0 0 16 16">
            <path fill-rule="evenodd"
              d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8zm15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z" />
          </svg>
        </a>
      </p>

      {% endif %}
      

    </div>

    </div>
    {% endblock %}